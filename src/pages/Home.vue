<template>
  <div>
    <Header current="Home"/>
    <section class="mw7 center ph2">
      <h1 class="mt5">Interactive Tutorials</h1>
      <p class="f4 fw5 lh-copy ma0 pv3  ">
      Our self-guided interactive tutorials are designed to introduce you to
      decentralized web concepts, protocols, and tools. Complete code
      challenges right in your web browser and track your progress as you go.
      </p>
      <div class="mv3">
        <router-link class="f5 link dim br-pill ph3 pv2 mb2 dib white bg-navy mr3" to="/tutorials">View All Tutorials</router-link>
        <router-link class="f5 link dim br-pill ph3 pv2 mb2 dib white bg-navy" to="/build">Build a Tutorial</router-link>
      </div>
      <h2>Featured Tutorials</h2>
      <div id="featured" class="flex flex-wrap justify-between">
        <template v-for="(tutorial, index) in featuredTutorials">
          <div class="bg-aqua br4 pa3 mb3 tutorial-tile" :key="index">
            <router-link :to="tutorial.url">
              <div class="flex flex-row justify-between ">
              <h3 class="ma0 f3 fw7 navy">{{tutorial.title}}</h3>
              <img
                :src="tutorialType(index).icon"
                :alt="tutorialType(index).alt"
                class="h2 ml3"/>
              </div>
              <p class="f5 fw5 ma0 pt2 lh-copy white">{{tutorial.description}}</p>
            </router-link>
          </div>
        </template>
      </div>
      <h1>Chapter Events</h1>
      <p class="f4 fw5 lh-copy ma0 pv3  ">
      Chapters around the world host in-person events using our tutorials as
      curriculum, with mentors available to help you work through the challenges.
      </p>
      <div class="mv3">
        <router-link class="f5 link dim br-pill ph3 pv2 mb2 dib white bg-navy mr3" to="/chapters">Find a Chapter Near You</router-link>
        <router-link class="f5 link dim br-pill ph3 pv2 mb2 dib white bg-navy" to="/host">Start Your Own</router-link>
      </div>
    </section>
  </div>
</template>

<script>
import Header from '../components/Header'
import coursesList from '../static/courses.json'
import tutorialsList from '../static/tutorials.json'
import { getTutorialType } from '../utils/tutorials'

import codeIcon from '../static/images/code.svg'
import readingIcon from '../static/images/reading.svg'
import multipleChoiceIcon from '../static/images/multiple_choice.svg'

export default {
  name: 'home',
  components: {
    Header
  },
  computed: {
    featuredTutorials: () => coursesList.featured.map((e) => tutorialsList[e])
  },
  methods: {
    tutorialType: function (index) {
      let tutorialId = (index + 1).toString().padStart(4, '0')
      let type = getTutorialType(tutorialId)
      if (type === 'code') {
        return { icon: codeIcon, alt: "coding icon" }
      } else if (type === 'multiple-choice') {
        return { icon: multipleChoiceIcon, alt: "multiple choice icon" }
      } else {
        return { icon: readingIcon, alt: "reading icon" }
      }
    }
  }
}

</script>

<style scoped>
.tutorial-tile {
  max-width: 49%;
  min-height: 167px;
}
.tutorial-tile a  {
  text-decoration: none;
}

.tutorial-tile a h3:hover,
.tutorial-tile a h3:focus {
  color: white;
}

@media screen and (max-width: 750px) {
  #featured {
    flex-wrap: nowrap;
    flex-direction: column;
  }

  .tutorial-tile {
    max-width: 100%
  }
}
</style>
